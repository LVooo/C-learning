# 翻金币案例

# 一、
# 1. 项目简介


# 2. 创建项目、添加项目资源


# 3. 项目 基本配置
- 设置背景图标
- 设置固定大小
- 设置项目标题
- 设置背景
- 背景标题
- 开始菜单 - 退出功能


# 4. 创建开始按钮
- 封装自定义按钮 MyPushButton
- 构造函数（默认显示图片，按下后显示的图片）
- 测试开始按钮
- 开始制作动画特效
- zoom1函数：向下跳
- zoom2函数：向上跳


# 5. 创建选择关卡场景
- 点击开始按钮后 延时进入到选择关卡场景
- 配置选择关卡场景（图标、标题、大小）
- 设置背景图片、设置标题图片
- 创建返回按钮


# 6. 选择关卡的返回按钮特效制作
- 点击后切换另一个图片
- 重写 `void mousePressEvent`
- 重写 `void mouseReleaseEvent`


# 7. 开始场景与选择关卡场景的切换
- 点击选择关卡场景的返回按钮，发送一个自定义信号
- 在主场景中监听这个信号，并且当触发信号后，重新显示主场景，隐藏掉选择关卡的场景


# 8. 选择关卡中的按钮创建
- 利用一个for循环将所有按钮布置到场景中（一层for循环构造二维矩阵）
- 在按钮上面设置一个QLabel显示关卡数
    - QLabel 设置大小、显示文字、对齐方式、鼠标穿透
- 给每个按钮 监听点击事件


# 9. 翻金币场景创建
- 点击选择关卡按钮后，进入到翻金币游戏场景
- 配置翻金币游戏场景 设置标题、图标、大小、设置背景
- 实现返回按钮，可以返回到上一个场景（选关场景）
- 实现三个场景之间的切换


# 10. 实现显示关卡标签
- 在左下角显示玩家具体的关卡标签
- QLabel 创建设置 大小和位置 `label->setGeometry(30, this->height() - 50, 130, 50);`
- `QFont font` 设置字体以及字号
- 给 QLabel 设置字体 `setFont(font)`


-------------------------------------------------------------------
# 二、

# 1. 创建金币类
- 先将金币的背景图案 放入到PlayScene中
- 创建MyCoin自定义金币按钮类
- `MyCoin::MyCoin(QString btnImg)` 构造函数中传入默认现实的图片金币
- 在 PlayScene 中创建所有的金币按钮


# 2. 每个关卡的默认显示
- 先引入 dataConfig.h 和 dataConfig.cpp 文件到项目中
- 在PlayScene中写了`int gameArray[4][4]`数组 维护每个关卡的金币状态
- 初始化每个关卡的显示


# 3. 金币翻转特效
- 给每个硬币加属性 posX：坐标x，poxY：坐标y，bool flag：正反面标志
- 给 MyCoin 加函数 changeFlag改变标志
    - 如果是flag为true改为false，并且开启定时器1 （正面翻反面）
    - 如果flag为false改为true，并且开启定时器2 （反面翻正面）
    - 实现定时器中的内容
- 测试：金币翻银币 以及 银币翻金币


# 4. 解决快速点击的效果不好
- 在 MyCoin 中加入了 isAnimation判断 是否在做动画条件
- 当按下 MyCoin 判断是否在做动画，如果做动画，直接return，保证金币和银币动态切换的完整效果


# 5. 翻转周围金币
- 点击金币后，延时翻转周围金币实现


# 6. 判断胜利
- PlayScene 中，添加 isWin 的标志来判断是否胜利
- 如果胜利了，打印胜利信息
- 将所有按钮 屏蔽掉点击


# 7. 胜利图片特效
- 将胜利图片放入到游戏场景外
- 当游戏胜利时，移动到屏幕中央，做胜利效果


# 8. 添加音效资源
- QSound 所属模块 multimedia 需要在.pro文件中加入这个模块
- 在三个场景中添加音效 `QSound *s = new QSound("资源")`
- 播放 `s->play()`
- `s->setLoop()` 设置播放次数为-1代表无限循环播放


# 9. 项目的优化
- 将三个场景的切换位置 一致


# 10. 项目打包发布 以及游戏扩展玩法简介
- 利用windeployqt发布Release版本
- 或利用nsis生成setup.exe安装版本
- 扩展玩法：增加矩阵横纵数量；计时器；Tab多关卡